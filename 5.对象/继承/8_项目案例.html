<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<canvas height="600px" width="800px" id="canvas" >
		不支持html5，请更换浏览器
	</canvas>
	<script type="text/javascript">
		//点的构造函数
		function Point(x,y){
			this.x=x;
			this.y=y;
		}
		//线的构造函数
		function Line(p1,p2){
			this.p1=p1;
			this.p2=p2;
			this.length=Math.sqrt(  Math.pow((p1.x-p2.x),2)   +   Math.pow((p1.y-p2.y),2)  );
		}
		//形状的构造函数，由n个点和线条组成
		function Shape(arr,n){
			this.points=[];
			this.lines=[];
			this.init();
		}
		//初始化、绘制  获取颜色、点、线条    获取周长面积
		Shape.prototype={
			init:function(){
				if((typeof this.cxt)=="undefined"){
					var canvas=document.getElementById("canvas");
					this.cxt=canvas.getContext('2d');
				}
			},
			draw:function(){
				var cxt=this.cxt;
				var points=this.getPoint();
				cxt.beginPath();
				cxt.moveTo(points[0].x,points[0].y);
				for(var i=1;i<points.length;i++){
					cxt.lineTo(points[i].x,points[i].y);
				}
				cxt.closePath();
				cxt.strokeStyle=this.getColor();
				cxt.stroke();
			},
			getColor:function(){
				//颜色的值是随机生成的
				var cs=[];
				for(var i=0;i<3;i++){
					cs[i]=Math.floor(Math.random()*255);
				}
				
				return "rgb("+cs.join(',')+")";
			},
			getPoint:function(){
				return this.points;
			},
			getLine:function(){
				if(this.lines.length>0){
					return this.lines;
				}
				var lines=[];
				if( this.points.length<=0 ){
					return lines;
				}
				for(var i=0;i<this.points.length;i++){
					lines[i]=new Line(this.points[i],this.points[i+1]?this.points[i+1]:this.points[0]);
				}
				this.lines=lines;
				return lines;
			},
			getperimeter:function(){
				var lines=this.getLine();
				var perimeter=0;
				for(var i=0;i<lines.length;i++){
					perimeter+=lines[i].length;
				}
				return perimeter;
			},
			getarea:function(){
				 
			}
		}

		//创建一个三角形类，来通过继承shape画三角形
		function Triangle(p1,p2,p3){
			this.points=[p1,p2,p3];
			this.getarea=function(){
				var perimeter=this.getperimeter();
				var p=perimeter/2;
				var lines=this.getLine();
				var area=Math.sqrt( p*(p-lines[0].length)*(p-lines[1].length)*(p-lines[2].length) );
				return area;
			}
		}
		Triangle.prototype=new Shape();

		//创建一个正方形类，来通过继承shape画正方形
		function Square(p1,length){
			this.points=[];
			this.points[0]=p1;
			this.points[1]=new Point(p1.x,p1.y+length);
			this.points[2]=new Point(p1.x+length,p1.y+length);
			this.points[3]=new Point(p1.x+length,p1.y);

			this.getarea=function(){
				var lines=this.getLine();
				var area=Math.pow(lines[0].length,2);
				return area;
			}
		}
		Square.prototype=new Shape();


		//测试
		var p1=new Point(100,200);
		var p2=new Point(250,80);
		var p3=new Point(400,200);
		var t1=new Triangle(p1,p2,p3);
		console.log(t1.getarea());
		t1.draw();

		var p1=new Point(100,200);
		var s1=new Square(p1,300);
		console.log(s1.getarea());
		s1.draw();
	</script>
</body>
</html>