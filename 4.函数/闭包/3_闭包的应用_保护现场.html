<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>

	<p>第一行</p>
	<p>第二行</p>
	<p>第三行</p>
	<script type="text/javascript">
	/*function addHandler(nodes){
		for(var i=0;i<nodes.length;i++){
			var node=nodes[i];
			node.onclick=function (){
				alert(i+1);
			}
		}
	}

	var nodes=document.getElementsByTagName('p');

	addHandler(nodes);*/

//修改方案1
	function addHandler(nodes){
		function invoke(i){
			return function (){
				alert(i+1);
			}
		}
		for(var i=0;i<nodes.length;i++){
			var node=nodes[i];
			node.onclick=invoke(i);
		}
	}

	var nodes=document.getElementsByTagName('p');

	addHandler(nodes);

//修改方案2
	function addHandler(nodes){
		
		for(var i=0;i<nodes.length;i++){
			var node=nodes[i];
			node.onclick=function (i){
				return function (){
					alert(i+1);
				}
			}(i);
		}
	}

	var nodes=document.getElementsByTagName('p');

	addHandler(nodes);

	</script>
</body>
</html>